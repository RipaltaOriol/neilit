<%- include("../../partials/header-statistics") %>
  <!-- CONTENT -->
  <div class="mx-2 mx-lg-4">
    <section>
      <div class="container">
        <!-- statistics per direction table -->
        <div class="widget-neilit row mx-2 mb-4">
          <div class="d-flex align-items-center pt-3 mx-2 w-100">
            <img src="/imgs/icons/science.svg" class="mx-2 image-widget" alt="Per Strategy Statistics">
            <h5 class="m-0">Per Strategy Statistics</h5>
          </div>
          <div class="w-100 mt-2 mb-0 mx-3">
            <span class="select-detail pb-2">
              <label>Select a strategy:</label>
              <!-- dropdown -->
              <div class="dropdown d-inline">
                <button id="dropdown-label" class="dropdown-select px-2" type="button" data-toggle="dropdown">
                  <%= __('long') %>
                </button>
                <ul id="dropdown-items" class="dropdown-menu" aria-labelledby="dropdown-label">
                  <li onclick="changeStats('long')"><%= __('long') %></li>
                  <li onclick="changeStats('short')"><%= __('short') %></li>
                </ul>
              </div>
            </span>
            <div class="row my-2">
              <div class="col-4 d-flex flex-column">
                <div class="d-flex justify-content-between">
                  <label>Total Revenue</label>
                  <span id="revenue"><%= directionStats.revenue.toFixed(2) %> <%= userCurrency %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Total Fees</label>
                  <span id="fees"><%= directionStats.fees.toFixed(2) %> <%= userCurrency %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Net Profit</label>
                  <span id="profit"><%= directionStats.profit.toFixed(2) %> <%= userCurrency %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Return</label>
                  <span id="return"><%= directionStats.str_return.toFixed(2) %> %</span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Max Win</label>
                  <span id="max-win"><%= directionStats.max.toFixed(2) %> <%= userCurrency %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Max Loss</label>
                  <span id="max-loss"><%= directionStats.min.toFixed(2) %> <%= userCurrency %></span>
                </div>
              </div>
              <div class="col-4">
                <div class="d-flex justify-content-between">
                  <label>Average Win</label>
                  <span id="avg-win"><%= directionStats.avg_win.toFixed(2) %> <%= userCurrency %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Average Loss</label>
                  <span id="avg-loss"><%= directionStats.avg_loss.toFixed(2) %> <%= userCurrency %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Average</label>
                  <span id="avg"><%= directionStats.avg.toFixed(2) %> <%= userCurrency %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Average Holding Time</label>
                  <span id="avg-hold"><%= directionStats.avg_holding.toFixed(2) %> days</span>
                </div>
              </div>
              <div class="col-4">
                <div class="d-flex justify-content-between">
                  <label>Gross Loss</label>
                  <span id="gross-loss"><%= directionStats.gross_loss.toFixed(2) %> <%= userCurrency %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Profit Factor</label>
                  <span id="profit-factor"><%= directionStats.profit_factor.toFixed(2) %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Playoff Ratio</label>
                  <span id="playoff-ratio"><%= directionStats.playoff.toFixed(2) %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Maximum Dradown</label>
                  <span id="max-drawdown"><%= directionDrawdown.max_drawdown.toFixed(2) %> <%= userCurrency %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Consecutive Winning Trades</label>
                  <% if (directionCountWin != undefined) { %>
                    <span id="consec-win"><%= directionCountWin.numcount.toFixed(2) %></span>
                  <% } else { %>
                    <span id="consec-win">N/A</span>
                  <% } %>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Consecutive Lossing Trades</label>
                  <% if (directionCountLoss != undefined) { %>
                    <span id="consec-loss"><%= directionCountLoss.numcount.toFixed(2) %></span>
                  <% } else { %>
                    <span id="consec-loss">N/A</span>
                  <% } %>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- statistics per period -->
        <div class="widget-neilit row mx-2 mb-4">
          <div class="d-flex align-items-center pt-3 mx-2 w-100">
            <img src="/imgs/icons/science.svg" class="mx-2 image-widget" alt="Statistics Per Period">
            <h5 class="m-0">Statistics Per Period</h5>
          </div>
          <div class="w-100 mt-2 mb-0 mx-3">
            <span class="select-detail pb-2">
              <label>Select a strategy:</label>
              <!-- dropdown -->
              <div class="dropdown d-inline">
                <button id="dropdown-label" class="dropdown-select px-2" type="button" data-toggle="dropdown">
                  <%= __('long') %>
                </button>
                <ul id="dropdown-items" class="dropdown-menu" aria-labelledby="dropdown-label">
                  <li onclick="changeAvgs('long')"><%= __('long') %></li>
                  <li onclick="changeAvgs('short')"><%= __('short') %></li>
                </ul>
              </div>
            </span>
            <div class="row my-2">
              <div class="col-4 d-flex flex-column">
                <div class="d-flex justify-content-between">
                  <label>Trades/Day</label>
                  <span id="avg-day"><%= directionAvgs.avg_daily.toFixed(2) %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Trades/Week</label>
                  <span id="avg-week"><%= directionAvgs.avg_week.toFixed(2) %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Trades/Month</label>
                  <span id="avg-month"><%= directionAvgs.avg_month.toFixed(2) %></span>
                </div>
              </div>
              <div class="col-4 flex-column">
                <div class="d-flex justify-content-between">
                  <label>Winning Trades/Day</label>
                  <span id="avg-win-day"><%= directionAvgs.avg_win_daily.toFixed(2) %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Winning Trades/Week</label>
                  <span id="avg-win-week"><%= directionAvgs.avg_win_week.toFixed(2) %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Winning Trades/Month</label>
                  <span id="avg-win-month"><%= directionAvgs.avg_win_month.toFixed(2) %></span>
                </div>
              </div>
              <div class="col-4 flex-column">
                <div class="d-flex justify-content-between">
                  <label>Lost Trades/Day</label>
                  <span id="avg-loss-day"><%= directionAvgs.avg_loss_daily.toFixed(2) %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Lost Trades/Week</label>
                  <span id="avg-loss-week"><%= directionAvgs.avg_loss_week.toFixed(2) %></span>
                </div>
                <div class="d-flex justify-content-between">
                  <label>Lost Trades/Month</label>
                  <span id="avg-loss-month"><%= directionAvgs.avg_loss_month.toFixed(2) %></span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

<script type="text/javascript">
  var username              = <%- JSON.stringify(currentUser.username); %>
  var darkMode              = <%- JSON.stringify(currentUser.darkMode); %>
  var userCurrency          = <%- JSON.stringify(userCurrency); %>
</script>

<!-- <section> is inside partials -->
</section>

<!-- JQUERY -->
<script type="text/javascript" src="/utilities/jquery/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="/utilities/jquery/jquery-ui.min.js"></script>
<script type="text/javascript" src="/utilities/bootstrap/js/popper.min.js"></script>
<script type="text/javascript" src="/utilities/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/utilities/chart.js/Chart.js"></script>
<script type="text/javascript" src="/utilities/chart.js/Chart.min.js"></script>
<!-- LOCAL SCRIPTS -->
<script type="text/javascript" src="/js/statistics/direction.js" charset="utf-8"></script>

<%- include("../../partials/footer-statistics-details") %>
