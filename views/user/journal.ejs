<%- include("../partials/header") %>

  <!-- CONTENT -->
  <div id="initial-user-screen" class="mt-3 mx-4">

    <div class="container">
      <div class="row">
        <div class="col-5">
        <!-- RECENT -->
          <div id="recents" class="journal-box entries my-4">
            <a class="noshow-anchor" href="/username/journal/entry">
              <h5>Últimas entradas</h5>
            </a>
            <hr>
            <% entries.title.forEach(function(entry, i) { %>
              <a class="journal-link" href="/username/journal/entry/ <%= entries.id[i] %> "><%= entry %></a>
            <% }); %>
            <br>
            <h5>Crear una entrada</h5>
            <hr>
            <form class="d-flex flex-column" action="journal/entry/new">
              <select name="pair" class="entry-pair custom-select py-1" onchange="createEntryPair(this)">
                <option value="default" selected>Activo</option>
                <!-- FIXME: passing the PAIR id is probably off by 1 -->
                <% for (var i = 0; i < pairs.length; i++) { %>
                  <option value="<%= i %>" class="valid"><%= pairs[i] %></option>
                <% } %>
              </select>
              <div class="buysell-check my-2">
                <div class="form-check form-check-inline">
                  <input class="form-check-input" name="entry-direction" type="radio" id="new-entry-buy" value="1" onclick="createEntryDirection(this.value)">
                  <label class="form-check-label" for="new-entry-buy">Compra</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" name="entry-direction" type="radio" id="new-entry-sell" value="2" onclick="createEntryDirection(this.value)">
                  <label class="form-check-label" for="new-entry-sell">Venta</label>
                </div>
              </div>
              <input type="submit" value="Continuar" id="create-new-entry" name="button" class="align-self-center px-3 py-2 journal-button">
            </form>
          </div>
        </div>

        <div class="col-7">
        <!-- TA -->
          <div id="TA" class="journal-box entries my-4 sameLine">
            <h5>Análisis técnico</h5>
            <hr>
            <% tas.title.forEach((ta, i) => { %>
              <a class="journal-link" href="/username/journal/ta/ <%= tas.id[i] %> "><%= ta %></a>
            <% }); %>
            <br>
            <h5>Nuevo análisis técnico</h5>
            <hr>
            <form class="d-flex flex-column" action="/username/journal/ta/new">
              <select class="custom-select py-1 mb-3" id="">
                <option selected>Activo</option>
                <!-- FIXME: passing the PAIR id is probably off by 1 -->
                <% for (var i = 0; i < pairs.length; i++) { %>
                  <option value="<%= i %>" class="valid"><%= pairs[i] %></option>
                <% } %>
              </select>
              <input type="submit" value="Continuar" id="create-new-ta" class="align-self-center px-3 py-2 journal-button">
            </form>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
        <!-- COMMENTS -->
          <div id="comments" class="journal-box entries my-4">
            <a class="noshow-anchor" href="/username/journal/comment">
              <h5>Últimos comentarios</h5>
            </a>
            <hr>
            <table>
              <% comments.date.forEach((date, index) => { %>
                <tr>
                  <td class="comment-date"><a class="journal-link" href="/username/journal/comment/<%= comments.id[index] %>"><%= date %></a></td>
                  <td><a class="journal-link" href="/username/journal/comment/<%= comments.id[index] %>"><%- comments.content[index] %></a></td>
                </tr>
              <% }) %>
            </table>
            <br>
            <form class="d-flex flex-column">
              <a href="/username/journal/comment/new" class="align-self-center px-3 py-2 journal-button">Nuevo</a>
            </form>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-4">
        <!-- BACKTESTING -->
          <div id="backtesting" class="journal-box entries my-4">
            <h5>Backtesting</h5>
            <hr>
              <p class="entries-text">Conoce el comportamiento de los activos.</p>
            <br>
            <form class="d-flex justify-content-around">
              <button id="" type="submit" name="button" class="px-3 py-2 journal-button">Nuevo</button>
              <button id="" type="submit" name="button" class="px-3 py-2 journal-altbutton">Ver todos</button>
            </form>
          </div>
        </div>

        <div class="col-8">
        <!-- STRATEGY CREATION -->
          <div id="strategies" class="journal-box entries my-4">
            <h5>Creación de estrategias</h5>
            <hr>
            <div class="d-flex justify-content-between">
              <p class="divide-width-70">Prueba nuevas estrategias y conoce su posible rentabilidad. Compárala con tus otras estrategias.</p>
              <form class="d-flex flex-column">
                <button id="" type="submit" name="button" class="align-self-end px-3 py-2 my-1 journal-button">Nuevo</button>
                <button id="" type="submit" name="button" class="align-self-end px-3 py-2 my-1 journal-altbutton">Ver todas</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

<!-- <section> is inside partials -->
</section>

<%- include("../partials/footer") %>
