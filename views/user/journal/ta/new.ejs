<%- include("../../../partials/header-log") %>

  <!-- CONTENT -->
  <div class="container mt-3 mb-5 mx-auto ta">
    <div class="journal-box px-0">
      <form action="/<%= currentUser.username %>/journal/ta" method="POST">
        <h3 class="mx-3"><%= __('Create Technical Analysis') %></h3>
        <hr>
        <div class="form-fields mb-2 mx-3">
          <span class="d-block">
              <label><%= __('Pair') %>:</label>
              <input id="ta-pair" type="text" name="pair" value="1" class="dropdown-server d-none">
              <!-- dropdown -->
              <div class="dropdown d-inline">
                <button id="dropdown-label" class="ta-pair dropdown-select px-2" type="button" data-toggle="dropdown">
                  <%= currencies[0] %>
                </button>
                <ul id="dropdown-items" class="dropdown-menu" aria-labelledby="dropdown-label">
                  <input class="dropdown-search p-2 w-100" type="text" placeholder="<%= __('Search') %>..." onkeyup="searchDropdown(this)">
                  <% for (var i = 0; i < currencies.length; i++) { %>
                    <li class="<%= i + 1 %>"><%= currencies[i] %></li>
                  <% } %>
                </ul>
              </div>
            </span>
          <div class="d-flex flex-column">
            <span>
              <label><%= ('Category') %>:</label>
              <input id="ta-category" type="text" class="form-input orange px-2" name="category" value="Forex" readonly>
            </span>
            <span>
              <label><%= ('Date') %>:</label>
              <input type="date" class="datepicker form-input orange px-2" data-target="date">
              <input type="date" id="date" class="d-none" name="date">
            </span>
          </div>
        </div>
        <hr>

        <!-- START: user content -->
        <div id="ta-content" class="mx-3">

        </div>
        <!-- END: user content -->

        <div class="btn-group dropright mx-3">
          <button type="button" id="add-e" class="btn btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <%= __('Add element') %>
          </button>
          <div class="dropdown-menu py-0">
            <a id="title" class="dropdown-item"><%= __('Title') %></a>
            <a id="image" class="dropdown-item"><%= __('Image') %></a>
            <a id="text" class="dropdown-item"><%= __('Text') %></a>
            <a id="strategy" class="dropdown-item"><%= __('Strategy') %></a>
          </div>
        </div>
        <div class="d-flex justify-content-end mx-3">
          <button id="submit-ta" type="submit" class="btn-neilit"><%= __('Create') %></button>
        </div>
      </form>
    </div>
  </div>

<script type="text/javascript">
  var language = <%- JSON.stringify(currentUser.language) %>;
  var currencies = <%- JSON.stringify(currencies) %>;
  var categories = <%- JSON.stringify(categories) %>;
  var strategies = <%- JSON.stringify(strategies) %>;
  var timeframes = <%- JSON.stringify(timeframes) %>;
  var elements   = <%- JSON.stringify(elements) %>;
</script>

<!-- <section> is inside partials -->
</section>

<!-- JQUERY -->
<script type="text/javascript" src="/utilities/jquery/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="/utilities/jquery/jquery-ui.min.js"></script>
<script type="text/javascript" src="/utilities/jquery/datepicker-es.js"></script>
<script type="text/javascript" src="/utilities/jquery/datepicker-en.js"></script>
<script type="text/javascript" src="/utilities/bootstrap/js/popper.min.js"></script>
<script type="text/javascript" src="/utilities/bootstrap/js/bootstrap.min.js"></script>
<!-- LOCAL SCRIPTS -->
<script type="text/javascript" src="/js/ta.js"></script>

<%- include("../../../partials/footer-log") %>
