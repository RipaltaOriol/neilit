<%- include("../../../partials/header-log") %>

  <!-- CONTENT -->
  <div class="container mx-auto mb-5 ta">
    <div class="journal-box px-0">
      <form action="/<%= currentUser.username %>/journal/ta" method="POST">
        <h3 class="mx-3"><%= __('Create Technical Analysis') %></h3>
        <hr>
        <div class="form-fields mb-2 mx-3">
          <span class="d-block mb-2">
            <label class="mb-0"><%= __('Pair') %>:</label>
            <input id="ta-pair" type="text" name="pair" value="1" class="dropdown-server d-none">
            <!-- dropdown -->
            <div class="dropdown d-inline">
              <button id="dropdown-label" class="ta-pair dropdown-select px-2" type="button" data-toggle="dropdown">
                <%= currencies.keys().next().value %>
              </button>
              <ul id="dropdown-items" class="dropdown-menu" aria-labelledby="dropdown-label">
                <input class="dropdown-search p-2 w-100" type="text" placeholder="<%= __('Search') %>..." onkeyup="searchDropdown(this)">
                <% for (let [key, value] of currencies) { %>
                  <li class="<%= value.id %>"><%= key %></li>
                <% } %>
              </ul>
            </div>
          </span>
          <div class="d-flex flex-column">
            <span class="mb-2">
              <label class="mb-0"><%= __('Category') %>:</label>
              <input id="ta-category" type="text" class="form-input orange px-2" name="category" value="Forex" readonly>
            </span>
            <span class="mb-2">
              <label class="mb-0"><%= __('Date') %>:</label>
              <input type="text" class="datepicker form-input orange px-2" data-target="date" placeholder="<%= __('Select a date') %>">
              <input type="text" id="date" class="d-none" name="date">
            </span>
          </div>
        </div>
        <hr>

        <!-- START: user content -->
        <div id="ta-content" class="mx-3">

        </div>
        <!-- END: user content -->

        <div class="btn-group dropright mx-3">
          <button type="button" id="add-e" class="btn btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <%= __('Add element') %>
          </button>
          <div class="dropdown-menu py-0">
            <li id="title" class="dropdown-item"><%= __('Title') %></li>
            <li id="image" class="dropdown-item"><%= __('Image') %></li>
            <li id="text" class="dropdown-item"><%= __('Text') %></li>
            <li id="strategy" class="dropdown-item"><%= __('Strategy') %></li>
          </div>
        </div>
        <div class="d-flex justify-content-end mx-3">
          <button id="submit-ta" type="submit" class="btn-neilit"><%= __('Create') %></button>
        </div>
      </form>
    </div>
  </div>

<script type="text/javascript">
  var language = <%- JSON.stringify(currentUser.language) %>;
  var currencies = <%- JSON.stringify(Array.from(currencies.entries())) %>;
  var strategies = <%- JSON.stringify(strategies) %>;
  var timeframes = <%- JSON.stringify(timeframes) %>;
  var elements   = <%- JSON.stringify(elements) %>;
</script>

<!-- <section> is inside partials -->
</section>

<!-- JQUERY -->
<script type="text/javascript" src="/utilities/jquery/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="/utilities/jquery/jquery-ui.min.js"></script>
<script type="text/javascript" src="/utilities/bootstrap/js/popper.min.js"></script>
<script type="text/javascript" src="/utilities/bootstrap/js/bootstrap.min.js"></script>
<!-- LOCAL SCRIPTS -->
<script type="text/javascript" src="/js/ta.js"></script>

<%- include("../../../partials/footer-log") %>
