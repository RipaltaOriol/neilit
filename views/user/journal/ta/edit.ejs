<%- include("../../../partials/header-log") %>

  <!-- CONTENT -->
  <div class="container mt-3 mx-auto">
    <div class="journal-box px-0">
      <form action="/<%= currentUser.username %>/journal/ta/<%= ta.id %>?_method=PUT" method="POST">
        <h3 class="mx-3">EDIT VIEW: <%= ta.title %></h3>
        <hr>
        <div class="mb-2 mx-3">
          <select id="ta-pair" name="pair" class="edit custom-select p-1" onchange="taCategory();">
            <% for (var i = 0; i < currencies.length; i++) { %>
              <% if (i === ta.pair) { %>
                <option value="<%= i %>" selected><%= currencies[i] %></option>
              <% } else { %>
                <option value="<%= i %>"><%= currencies[i] %></option>
              <% } %>
            <% } %>
          </select>
          <div class="d-flex flex-column mt-2">
            <span>
              <label>Categor√≠a</label>
              <input id="ta-category" type="text" class="bg-hover orange px-2" name="category" value="<%= ta.category %>" readonly>
            </span>
            <span>
              <label>Fecha</label>
              <input type="date" class="bg-hover orange px-2" name="date" value="<%= ta.date %>">
            </span>
          </div>
        </div>
        <hr>

        <!-- START: user content -->
        <div id="ta-content" class="mx-3 mb-3">
          <%- ta.content %>
        </div>
        <!-- END: user content -->

        <div class="btn-group dropright mx-3">
          <button type="button" id="add-e" class="btn btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Agregar elemento
          </button>
          <div class="dropdown-menu py-0">
            <a id="title" class="dropdown-item">Titulo</a>
            <a id="image" class="dropdown-item">Imagen</a>
            <a id="text" class="dropdown-item">Texto</a>
            <a id="strategy" class="dropdown-item">Estrategia</a>
          </div>
        </div>
        <div class="d-flex justify-content-end mx-3">
          <a href="javascript:history.back()" class="btn-inverted ml-2">Cancelar</a>
          <button type="submit" class="btn-neilit ml-2">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- FIX: only use what's necessary -->
  <script>
    var categories = <%- JSON.stringify(categories) %>;
    var strategies = <%- JSON.stringify(strategies) %>;
    var timeframes = <%- JSON.stringify(timeframes) %>;
    var elements   = <%- JSON.stringify(elements) %>;
  </script>

  <!-- JQUERY -->
  <script type="text/javascript" src="/utilities/jquery/jquery-3.5.1.min.js"></script>
  <script type="text/javascript" src="/utilities/bootstrap/js/popper.min.js"></script>
  <script type="text/javascript" src="/utilities/jquery/jquery-ui.min.js"></script>
  <script type="text/javascript" src="/utilities/bootstrap/js/bootstrap.min.js"></script>
  <!-- LOCAL SCRIPTS -->
  <script type="text/javascript" src="/js/ta.js"></script>

<%- include("../../../partials/footer-log") %>
